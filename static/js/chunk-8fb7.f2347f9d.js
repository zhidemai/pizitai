(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8fb7"],{"8mTO":function(e,t,a){"use strict";var n=a("YwMY");a.n(n).a},B2Fc:function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"d",function(){return l}),a.d(t,"f",function(){return s}),a.d(t,"e",function(){return c}),a.d(t,"c",function(){return r}),a.d(t,"b",function(){return u});var n=a("t3Un");function i(e){return Object(n.a)({url:"bi/achievement/statistics",method:"post",data:e})}function l(e){return Object(n.a)({url:"bi/product/statistics",method:"post",data:e})}function s(e){return Object(n.a)({url:"bi/receivables/statistics",method:"post",data:e})}function c(e){return Object(n.a)({url:"bi/receivables/statisticList",method:"post",data:e})}function r(e){return Object(n.a)({url:"bi/customer/statistics",method:"post",data:e})}function u(e){return Object(n.a)({url:"bi/business/funnel",method:"post",data:e})}},YwMY:function(e,t,a){},"y/eF":function(e,t,a){"use strict";a.r(t);var n=a("KTTK"),i=a("B2Fc"),l=a("7Qib"),s=a("wd/R"),c=a.n(s),r={name:"employee-statistics",components:{},data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}},loading:!1,tableHeight:document.documentElement.clientHeight-170,dateSelect:[],structuresProps:{children:"children",label:"label",value:"id"},deptList:[],structuresSelectValue:"",userOptions:[],userSelectValue:"",list:[],fieldList:[{field:"realname",name:"员工姓名"},{field:"customer_num",name:"客户数"},{field:"deal_customer_num",name:"成交客户数"},{field:"deal_customer_rate",name:"客户成交率(%)"},{field:"contract_money",name:"合同总金额"},{field:"receivables_money",name:"回款金额"},{field:"un_receivables_money",name:"未回款金额"},{field:"deal_receivables_rate",name:"回款完成率(%)"}]}},computed:{},mounted:function(){var e=this;window.onresize=function(){var t=document.documentElement.clientHeight;e.tableHeight=t-170};var t=c()(new Date).format("YYYY-MM-DD"),a=t.split("-"),n=a[0]+"-"+a[1]+"-01";this.dateSelect=[n,t],this.getDeptList()},methods:{getDataList:function(){var e=this;this.loading=!0,Object(i.c)({start_time:Object(l.d)(this.dateSelect[0]),end_time:Object(l.d)(this.dateSelect[1]),structure_id:this.structuresSelectValue,user_id:this.userSelectValue}).then(function(t){e.list=t.data,e.loading=!1}).catch(function(){e.loading=!1})},getDeptList:function(){var e=this;this.loading=!0,Object(n.b)().then(function(t){e.deptList=t.data,e.loading=!1,t.data.length>0&&(e.structuresSelectValue=t.data[0].id,e.getUserList(),e.getDataList())}).catch(function(){e.loading=!1})},structuresValueChange:function(e){this.userSelectValue="",this.userOptions=[],this.getUserList()},getUserList:function(){var e=this,t={};t.structure_id=this.structuresSelectValue,Object(n.j)(t).then(function(t){e.userOptions=t.data}).catch(function(){})},handleClick:function(e){"search"===e&&this.getDataList()}}},u=(a("8mTO"),a("KHd+")),o=Object(u.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main-container"},[a("div",{staticClass:"handle-bar"},[a("el-date-picker",{attrs:{type:"daterange",clearable:!1,"range-separator":"-",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateSelect,callback:function(t){e.dateSelect=t},expression:"dateSelect"}}),e._v(" "),a("el-select",{attrs:{placeholder:"选择部门"},on:{change:e.structuresValueChange},model:{value:e.structuresSelectValue,callback:function(t){e.structuresSelectValue=t},expression:"structuresSelectValue"}},e._l(e.deptList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-select",{attrs:{clearable:!0,placeholder:"选择员工"},model:{value:e.userSelectValue,callback:function(t){e.userSelectValue=t},expression:"userSelectValue"}},e._l(e.userOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.realname,value:e.id}})})),e._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.handleClick("search")}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"content"},[a("el-table",{attrs:{data:e.list,height:e.tableHeight,stripe:"",border:"","highlight-current-row":""}},e._l(e.fieldList,function(e,t){return a("el-table-column",{key:t,attrs:{align:"center","header-align":"center","show-overflow-tooltip":"",prop:e.field,label:e.name}})}))],1)])},[],!1,null,"46c8a0f1",null);o.options.__file="EmployeeStatistics.vue";t.default=o.exports}}]);